# -----------------------------------------
# CUSTOMER CHURN ANALYSIS PROJECT - PYTHON
# -----------------------------------------

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

# (Optional) Disable warnings for clean output
import warnings
warnings.filterwarnings("ignore")

# Load Dataset
data = pd.read_csv("customer_churn_clean.csv")

# Overview
print("First 5 rows:\n", data.head())
print("\nShape:", data.shape)
print("\nMissing values:\n", data.isnull().sum())

# Summary Stats
print("\nSummary Statistics:\n", data.describe(include="all"))

# Churn Count
plt.figure(figsize=(6,4))
sns.countplot(x="Churn", data=data)
plt.title("Churn Distribution")
plt.show()

# Gender vs Churn
plt.figure(figsize=(6,4))
sns.countplot(x="gender", hue="Churn", data=data)
plt.title("Gender vs Churn")
plt.show()

# Contract Type vs Churn
plt.figure(figsize=(6,4))
sns.countplot(x="Contract", hue="Churn", data=data)
plt.title("Contract Type vs Churn")
plt.xticks(rotation=45)
plt.show()

# Internet Service vs Churn
plt.figure(figsize=(6,4))
sns.countplot(x="InternetService", hue="Churn", data=data)
plt.title("Internet Service vs Churn")
plt.xticks(rotation=45)
plt.show()

# Monthly Charges vs Churn
plt.figure(figsize=(6,4))
sns.boxplot(x="Churn", y="MonthlyCharges", data=data)
plt.title("Monthly Charges vs Churn")
plt.show()

# Tenure vs Churn
plt.figure(figsize=(6,4))
sns.histplot(data=data, x="Tenure", hue="Churn", kde=True, bins=15)
plt.title("Tenure Distribution by Churn")
plt.show()

# Correlation Heatmap
numeric_cols = ["SeniorCitizen", "Tenure", "MonthlyCharges", "TotalCharges"]

plt.figure(figsize=(6,4))
sns.heatmap(data[numeric_cols].corr(), annot=True, cmap="Blues")
plt.title("Correlation Heatmap")
plt.show()

# Insights
print("\nKEY INSIGHTS:")
print("1. Month-to-month customers show highest churn rate.")
print("2. Fiber optic users churn more than DSL users.")
print("3. High monthly charge customers churn more.")
print("4. Customers with low tenure (new users) churn frequently.")
